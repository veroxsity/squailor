<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Squailor - AI Document Summarizer</title>
  <link rel="stylesheet" href="styles.css">
  <script src="node_modules/marked/lib/marked.umd.js"></script>
</head>
<body class="dark-theme">
  <!-- Background Animation -->
  <div class="background-animation">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
  </div>

  <div class="container">
    <!-- Navigation Bar -->
    <nav class="navbar">
      <div class="nav-brand">
        <div class="logo-icon">
          <svg width="40" height="40" viewBox="0 0 48 48" fill="none">
            <rect width="48" height="48" rx="12" fill="url(#gradient1)"/>
            <path d="M14 18h20M14 24h20M14 30h14" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
            <defs>
              <linearGradient id="gradient1" x1="0" y1="0" x2="48" y2="48">
                <stop offset="0%" stop-color="#667eea"/>
                <stop offset="100%" stop-color="#764ba2"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div class="brand-text">
          <h1>Squailor</h1>
          <span>AI Summarizer</span>
        </div>
      </div>
      
      <div class="nav-menu">
        <button class="nav-item active" data-page="home">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
          </svg>
          <span>Home</span>
        </button>
        <button class="nav-item" data-page="history">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
          </svg>
          <span>History</span>
        </button>
        <button class="nav-item" data-page="settings">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
          </svg>
          <span>Settings</span>
        </button>
      </div>
    </nav>

    <!-- Main Content Area -->
    <div class="content-wrapper">
      <!-- Home Page -->
      <div id="homePage" class="page active">
        <header class="page-header">
          <h2>Document Summarizer</h2>
          <p class="page-subtitle">Transform your documents into concise, intelligent summaries</p>
        </header>

        <div class="main-content">
          <!-- Summary Mode Selector -->
          <div class="card mode-card">
            <div class="card-header">
              <div class="card-icon">‚ö°</div>
              <div>
                <h3>Summary Length</h3>
                <p class="card-subtitle">Choose how detailed you want the summary</p>
              </div>
            </div>
            
            <div class="card-body">
              <div class="length-grid">
                <div class="length-item">
                  <input type="radio" name="summaryType" value="short" id="modeShort">
                  <label for="modeShort" class="length-option">
                    <div class="length-icon">‚ö°</div>
                    <div class="length-text">
                      <strong>Short</strong>
                      <span>Quick bullet points</span>
                    </div>
                  </label>
                </div>
                
                <div class="length-item">
                  <input type="radio" name="summaryType" value="normal" id="modeNormal" checked>
                  <label for="modeNormal" class="length-option">
                    <div class="length-icon">üìù</div>
                    <div class="length-text">
                      <strong>Normal</strong>
                      <span>Balanced summary</span>
                    </div>
                  </label>
                </div>
                
                <div class="length-item">
                  <input type="radio" name="summaryType" value="longer" id="modeLonger">
                  <label for="modeLonger" class="length-option">
                    <div class="length-icon">üìö</div>
                    <div class="length-text">
                      <strong>Longer</strong>
                      <span>More thorough explanations</span>
                    </div>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Response Tone Selector -->
          <div class="card mode-card">
            <div class="card-header">
              <div class="card-icon">üé≠</div>
              <div>
                <h3>Response Tone</h3>
                <p class="card-subtitle">Choose the writing style of your summary</p>
              </div>
            </div>
            
            <div class="card-body">
              <div class="tone-grid">
                <div class="tone-item">
                  <input type="radio" name="responseTone" value="casual" id="toneCasual" checked>
                  <label for="toneCasual" class="tone-option">
                    <div class="tone-icon">üòä</div>
                    <div class="tone-text">
                      <strong>Casual</strong>
                      <span>Friendly and conversational</span>
                    </div>
                  </label>
                </div>
                
                <div class="tone-item">
                  <input type="radio" name="responseTone" value="formal" id="toneFormal">
                  <label for="toneFormal" class="tone-option">
                    <div class="tone-icon">üéì</div>
                    <div class="tone-text">
                      <strong>Formal</strong>
                      <span>Professional and academic</span>
                    </div>
                  </label>
                </div>
                
                <div class="tone-item">
                  <input type="radio" name="responseTone" value="informative" id="toneInformative">
                  <label for="toneInformative" class="tone-option">
                    <div class="tone-icon">üìö</div>
                    <div class="tone-text">
                      <strong>Informative</strong>
                      <span>Fact-focused and comprehensive</span>
                    </div>
                  </label>
                </div>
                
                <div class="tone-item">
                  <input type="radio" name="responseTone" value="easy" id="toneEasy">
                  <label for="toneEasy" class="tone-option">
                    <div class="tone-icon">‚ú®</div>
                    <div class="tone-text">
                      <strong>Easy to Understand</strong>
                      <span>Simplified language</span>
                    </div>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Summary Style Selector -->
          <div class="card mode-card">
            <div class="card-header">
              <div class="card-icon">üìñ</div>
              <div>
                <h3>Summary Style</h3>
                <p class="card-subtitle">Choose how the summary is formatted</p>
              </div>
            </div>
            
            <div class="card-body">
              <div class="style-grid">
                <div class="style-item">
                  <input type="radio" name="summaryStyle" value="teaching" id="styleTeaching" checked>
                  <label for="styleTeaching" class="style-option">
                    <div class="style-icon">üë®‚Äçüè´</div>
                    <div class="style-text">
                      <strong>Teaching</strong>
                      <span>Clear explanation format</span>
                    </div>
                  </label>
                </div>
                
                <div class="style-item">
                  <input type="radio" name="summaryStyle" value="notes" id="styleNotes">
                  <label for="styleNotes" class="style-option">
                    <div class="style-icon">üìù</div>
                    <div class="style-text">
                      <strong>Notes</strong>
                      <span>Student note-taking style</span>
                    </div>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- File Upload Section -->
          <div class="card file-card">
            <div class="card-header">
              <div class="card-icon">üìÑ</div>
              <div>
                <h3>Upload Documents</h3>
                <p class="card-subtitle">Select PDF or PowerPoint files to summarize</p>
              </div>
            </div>
            
            <div class="card-body">
              <div class="upload-area" id="uploadArea">
                <div class="upload-icon">
                  <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                    <circle cx="32" cy="32" r="30" stroke="url(#gradient2)" stroke-width="2" stroke-dasharray="4 4"/>
                    <path d="M32 20v24M20 32h24" stroke="url(#gradient2)" stroke-width="3" stroke-linecap="round"/>
                    <defs>
                      <linearGradient id="gradient2" x1="0" y1="0" x2="64" y2="64">
                        <stop offset="0%" stop-color="#667eea"/>
                        <stop offset="100%" stop-color="#764ba2"/>
                      </linearGradient>
                    </defs>
                  </svg>
                </div>
                <h4>Drop files here or click to browse</h4>
                <p>Supports common Document types (PPTX, PDF, DOCX)</p>
                <button id="selectFiles" class="btn btn-outline">
                  <span class="btn-icon">üìÅ</span>
                  <span>Choose Files</span>
                </button>
              </div>
              
              <div id="fileList" class="file-list"></div>
              
              <button id="processFiles" class="btn btn-primary btn-block btn-large" disabled>
                <span class="btn-icon">üöÄ</span>
                <span>Generate Summaries</span>
              </button>
            </div>
          </div>

          <!-- Results Section -->
          <div id="resultsSection" class="results-section" style="display: none;">
            <div class="section-header">
              <h3>‚ú® Summary Results</h3>
              <p>Review and save your document summaries</p>
            </div>
            <div id="results" class="results-grid"></div>
          </div>
        </div>
      </div>

      <!-- History Page -->
      <div id="historyPage" class="page">
        <header class="page-header">
          <h2>Summary History</h2>
          <p class="page-subtitle">View and manage your past document summaries</p>
        </header>

        <div class="main-content history-content">
          <!-- History Controls -->
          <div class="history-controls">
            <div class="history-stats">
              <div class="stat-item">
                <span class="stat-number" id="totalSummaries">0</span>
                <span class="stat-label">Total Summaries</span>
              </div>
              <div class="stat-item">
                <span class="stat-number" id="totalDocuments">0</span>
                <span class="stat-label">Documents Processed</span>
              </div>
            </div>
            <div class="history-actions">
              <button id="clearHistory" class="btn btn-outline btn-danger">
                <span class="btn-icon">üóëÔ∏è</span>
                <span>Clear All History</span>
              </button>
            </div>
          </div>

          <!-- History List -->
          <div id="historyList" class="history-list">
            <!-- History items will be inserted here -->
          </div>

          <!-- Empty State -->
          <div id="emptyHistory" class="empty-state" style="display: none;">
            <div class="empty-icon">üìù</div>
            <h3>No History Yet</h3>
            <p>Start summarizing documents to see them here</p>
            <button class="btn btn-primary" onclick="document.querySelector('[data-page=home]').click()">
              <span class="btn-icon">üöÄ</span>
              <span>Get Started</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Summary View Page -->
      <div id="summaryViewPage" class="page">
        <header class="page-header">
          <button class="btn btn-outline btn-small back-button" id="backFromSummary">
            <span>‚Üê Back to History</span>
          </button>
          <div>
            <h2 id="summaryViewTitle">Summary</h2>
            <p class="page-subtitle" id="summaryViewMeta">Loading...</p>
          </div>
        </header>

        <div class="main-content summary-view-content">
          <!-- Summary Container -->
          <div class="summary-view-container">
            <div class="summary-view-header">
              <div class="summary-view-info">
                <div class="summary-view-icon">‚ú®</div>
                <div>
                  <h3>AI Generated Summary</h3>
                  <p id="summaryViewStats">Loading...</p>
                </div>
              </div>
              <div class="summary-view-actions">
                <button class="btn btn-outline btn-small" id="copySummaryView">Copy</button>
                <button class="btn btn-outline btn-small" id="exportSummaryMD">MD</button>
                <button class="btn btn-outline btn-small" id="exportSummaryTXT">TXT</button>
                <button class="btn btn-outline btn-small" id="shareSummaryView">Share</button>
              </div>
            </div>
            
            <div class="summary-view-body markdown-content" id="summaryViewContent">
              <div class="viewer-loading">Loading summary...</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Settings Page -->
      <div id="settingsPage" class="page">
        <header class="page-header">
          <h2>Settings</h2>
          <p class="page-subtitle">Configure your preferences and API settings</p>
        </header>

        <div class="main-content">
          <!-- API Configuration Card -->
          <div class="card">
            <div class="card-header">
              <div class="card-icon">üîë</div>
              <div>
                <h3>API Configuration</h3>
                <p class="card-subtitle">Connect your OpenRouter account</p>
              </div>
            </div>
            
            <div class="card-body">
              <div class="form-group">
                <label for="apiKey" class="form-label">OpenRouter API Key</label>
                <div class="input-with-button">
                  <input 
                    type="password" 
                    id="apiKey" 
                    class="modern-input"
                    placeholder="sk-or-v1-..."
                    autocomplete="off"
                  >
                  <button id="toggleApiKey" class="icon-button" title="Show/Hide">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                      <path d="M10 3C5 3 1.73 7.11 1 10c.73 2.89 4 7 9 7s8.27-4.11 9-7c-.73-2.89-4-7-9-7zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                    </svg>
                  </button>
                </div>
                <div class="form-helper">
                  Get your API key from <a href="https://openrouter.ai/keys" target="_blank">OpenRouter</a> (supports 100+ AI models!)
                </div>
              </div>
              
              <button id="saveApiKey" class="btn btn-success">
                <span class="btn-icon">‚úì</span>
                <span>Save & Validate Key</span>
              </button>
              
              <div id="apiKeyStatus" class="status-message"></div>
            </div>
          </div>

          <!-- Appearance Settings Card -->
          <div class="card">
            <div class="card-header">
              <div class="card-icon">üé®</div>
              <div>
                <h3>Appearance</h3>
                <p class="card-subtitle">Customize the look and feel</p>
              </div>
            </div>
            
            <div class="card-body">
              <div class="form-group">
                <label class="form-label">Theme</label>
                <div class="theme-selector">
                  <div class="theme-option" data-theme="dark">
                    <div class="theme-preview dark-preview">
                      <div class="preview-header"></div>
                      <div class="preview-content">
                        <div class="preview-card"></div>
                        <div class="preview-card"></div>
                      </div>
                    </div>
                    <div class="theme-info">
                      <strong>Dark</strong>
                      <span>Easy on the eyes</span>
                    </div>
                    <div class="theme-check">‚úì</div>
                  </div>
                  
                  <div class="theme-option" data-theme="light">
                    <div class="theme-preview light-preview">
                      <div class="preview-header"></div>
                      <div class="preview-content">
                        <div class="preview-card"></div>
                        <div class="preview-card"></div>
                      </div>
                    </div>
                    <div class="theme-info">
                      <strong>Light</strong>
                      <span>Clean and bright</span>
                    </div>
                    <div class="theme-check">‚úì</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Model Settings Card -->
          <div class="card">
            <div class="card-header">
              <div class="card-icon">ü§ñ</div>
              <div>
                <h3>AI Model</h3>
                <p class="card-subtitle">Choose your AI model via OpenRouter</p>
              </div>
            </div>
            
            <div class="card-body">
              <div class="form-group">
                <label for="modelSelect" class="form-label">AI Model</label>
                <select id="modelSelect" class="modern-select">
                  <optgroup label="OpenAI Models">
                    <option value="openai/gpt-4o-mini" selected>GPT-4o Mini (Recommended - Fast & Cheap)</option>
                    <option value="openai/gpt-4o">GPT-4o (Most Capable)</option>
                    <option value="openai/gpt-4-turbo">GPT-4 Turbo</option>
                    <option value="openai/gpt-3.5-turbo">GPT-3.5 Turbo (Fastest)</option>
                  </optgroup>
                  <optgroup label="Anthropic Models">
                    <option value="anthropic/claude-3.5-sonnet">Claude 3.5 Sonnet (Excellent)</option>
                    <option value="anthropic/claude-3-opus">Claude 3 Opus (Best Reasoning)</option>
                    <option value="anthropic/claude-3-haiku">Claude 3 Haiku (Fast & Cheap)</option>
                  </optgroup>
                  <optgroup label="Google Models">
                    <option value="google/gemini-pro-1.5">Gemini 1.5 Pro</option>
                    <option value="google/gemini-flash-1.5">Gemini 1.5 Flash (Fast)</option>
                  </optgroup>
                  <optgroup label="Meta Models">
                    <option value="meta-llama/llama-3.1-70b-instruct">Llama 3.1 70B</option>
                    <option value="meta-llama/llama-3.1-8b-instruct">Llama 3.1 8B (Cheap)</option>
                  </optgroup>
                  <optgroup label="Other Models">
                    <option value="mistralai/mistral-large">Mistral Large</option>
                    <option value="perplexity/llama-3.1-sonar-large-128k-online">Perplexity Sonar (With Web Access)</option>
                  </optgroup>
                </select>
                <div class="form-helper">
                  OpenRouter gives you access to 100+ AI models. <a href="https://openrouter.ai/models" target="_blank">View all models</a>
                </div>
              </div>

              <div class="info-box">
                <div class="info-icon">üí°</div>
                <div class="info-content">
                  <strong>Model Comparison</strong>
                  <ul>
                    <li><strong>GPT-4o Mini:</strong> Fast, affordable, great quality (recommended)</li>
                    <li><strong>Claude 3.5 Sonnet:</strong> Excellent for detailed summaries</li>
                    <li><strong>Gemini Flash:</strong> Very fast and cost-effective</li>
                    <li><strong>Llama 3.1:</strong> Open source, good value</li>
                  </ul>
                  <p style="margin-top: 8px; font-size: 0.875rem; color: var(--text-secondary);">
                    üí∞ Pricing varies by model. Check <a href="https://openrouter.ai/models" target="_blank">OpenRouter pricing</a>
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- Storage Settings Card -->
          <div class="card">
            <div class="card-header">
              <div class="card-icon">üíæ</div>
              <div>
                <h3>Storage Location</h3>
                <p class="card-subtitle">Choose where to store document files</p>
              </div>
            </div>
            
            <div class="card-body">
              <div class="form-group">
                <label class="form-label">Storage Location</label>
                <div class="storage-options">
                  <label class="storage-option">
                    <input type="radio" name="storageLocation" value="appdata" id="storageAppData" checked>
                    <div class="storage-card">
                      <div class="storage-icon">üìÅ</div>
                      <div class="storage-info">
                        <strong>AppData (Default)</strong>
                        <span>Standard Windows application data folder</span>
                        <div class="storage-path" id="appdataPath">Loading...</div>
                      </div>
                    </div>
                  </label>
                  
                  <label class="storage-option">
                    <input type="radio" name="storageLocation" value="local-app" id="storageLocalApp">
                    <div class="storage-card">
                      <div class="storage-icon">üìÇ</div>
                      <div class="storage-info">
                        <strong>App Folder</strong>
                        <span>Store in application's directory (portable)</span>
                        <div class="storage-path" id="localAppPath">Loading...</div>
                      </div>
                    </div>
                  </label>
                </div>
              </div>

              <button id="saveStorageLocation" class="btn btn-primary">
                <span class="btn-icon">üíæ</span>
                <span>Save Storage Location</span>
              </button>

              <div id="storageStatus" class="status-message"></div>

              <div class="info-box" style="margin-top: 16px;">
                <div class="info-icon">‚ÑπÔ∏è</div>
                <div class="info-content">
                  <strong>Storage Information</strong>
                  <ul>
                    <li><strong>AppData:</strong> Recommended for most users, integrated with Windows</li>
                    <li><strong>App Folder:</strong> Portable, keeps data with the application</li>
                  </ul>
                  <div style="margin-top: 12px; padding: 12px; background: rgba(99, 102, 241, 0.1); border-radius: 8px; border: 1px solid rgba(99, 102, 241, 0.3);">
                    <strong style="color: var(--primary);">üìÇ Data Structure:</strong>
                    <div style="font-family: 'Courier New', monospace; font-size: 0.875rem; color: var(--text-secondary); margin-top: 8px; line-height: 1.6;">
                      data/<br>
                      ‚îú‚îÄ‚îÄ documents/      (your files)<br>
                      ‚îú‚îÄ‚îÄ settings.json   (app settings)<br>
                      ‚îî‚îÄ‚îÄ keystore.enc    (encrypted API key)
                    </div>
                  </div>
                  <div style="margin-top: 12px; padding: 12px; background: rgba(239, 68, 68, 0.1); border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3);">
                    <strong style="color: var(--danger);">‚ö†Ô∏è Important:</strong>
                    <span style="color: var(--text-secondary); font-size: 0.875rem;">
                      Changing storage location will automatically move all files to the new location and clean up the old one.
                    </span>
                  </div>
                </div>
              </div>

              <div class="storage-stats" id="storageStats">
                <div class="stat-row">
                  <span>Files stored:</span>
                  <strong id="statsFileCount">0</strong>
                </div>
                <div class="stat-row">
                  <span>Total size:</span>
                  <strong id="statsTotalSize">0 MB</strong>
                </div>
              </div>
            </div>
          </div>

          <!-- Updates Card -->
          <div class="card">
            <div class="card-header">
              <div class="card-icon">‚¨ÜÔ∏è</div>
              <div>
                <h3>Updates</h3>
                <p class="card-subtitle">Check for app updates and install them</p>
              </div>
            </div>

            <div class="card-body">
              <div class="form-group">
                <label class="form-label">Application Updates</label>
                <div style="display:flex; gap:8px; align-items:center;">
                  <button id="checkUpdatesBtn" class="btn btn-primary">Check for updates</button>
                  <button id="installUpdateBtn" class="btn btn-success" style="display:none;">Restart & Install</button>
                  <div id="updateStatus" style="margin-left:8px; color:var(--text-secondary);"></div>
                </div>
                <div class="form-helper">Updates are delivered via GitHub Releases. Click to check now.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Summary Completion Modal -->
  <div id="summaryCompleteModal" class="modal">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>‚ú® Generated Summaries</h2>
        <button class="modal-close" onclick="closeSummaryModal()">√ó</button>
      </div>
      <div class="modal-body">
        <p class="modal-description">Your document summaries have been generated successfully!</p>
        <div id="summaryCards" class="summary-cards-grid">
          <!-- Summary cards will be inserted here -->
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeSummaryModal()">Close</button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
  <div id="toastContainer" class="toast-container" aria-live="polite" aria-atomic="true"></div>
  <!-- Confirm Modal -->
  <div id="confirmModal" class="modal" style="display:none;">
    <div class="modal-overlay"></div>
    <div class="modal-content small">
      <div class="modal-body" id="confirmModalBody">Are you sure?</div>
      <div class="modal-footer">
        <button id="confirmCancelBtn" class="btn btn-outline">Cancel</button>
        <button id="confirmOkBtn" class="btn btn-success">Confirm</button>
      </div>
    </div>
  </div>
</body>
</html>
